<HTML><HEAD><TITLE>YU-RIS マニュアル</TITLE><LINK REL=STYLESHEET TYPE="text/css" HREF="../css/ysstyle.css"></HEAD>
<BODY STYLE="margin:0pt 0pt 0pt 0pt" BGCOLOR=#000000>

<TABLE CELLSPACING=0 CELLPADDING=0 HEIGHT=20 CLASS=MAX>
<TR><TD BGCOLOR=#303060 CLASS=t30>
<B CLASS=t30>■<A HREF="../top.html">TOP</A>＞<A HREF="./top.html">概要</A>＞ＣＧレイヤ</B>
</TD></TR></TABLE>

<TABLE CELLSPACING=0 CELLPADDING=0 HEIGHT=40 CLASS=MAX>
<TR><TD BGCOLOR=#606080 CLASS=t20>
　<A HREF="./basic.html">[基本文法]</A>
　<A HREF="./variable.html">[変数]</A>
　<A HREF="./svariable.html">[システム変数]</A>
　<A HREF="./macro.html">[マクロ]</A>
　<A HREF="./layer.html">[ＣＧレイヤ]</A>
　<A HREF="./task.html">[タスク]</A>
　<A HREF="./input.html">[入力]</A>
</TD></TR></TABLE>

<PRE>
<FONT CLASS=t70>■ＣＧレイヤ</FONT>
<FONT CLASS=t20>

ＣＧレイヤは無限に(メモリが許す限り)生成することが出来ます。


■■レイヤＩＤ


従来の２次元レイヤ構造を排除し、レイヤＩＤによる管理になりました。

例１：
	CG[ID="背景" Z=1 FILE="cg/bg.jpg"]

レイヤ生成時に、ＩＤ（名前）を付けることができます。
上記の例１では、「背景」というＩＤ（名前）のレイヤを生成しています。
ＩＤが明らかに文字列であれば（数値表現でなければ）、
「”」ダブルクォーテーションを省略して、例２のように書けます。

例２：
	CG[ID=背景 Z=1 FILE=cg/bg.jpg]



■■優先度


レイヤには優先度という概念があり、優先度の値が大きいほど、手前に表示されます。
レイヤの優先度の設定はＺキーワードで行います。

例３：
	CG[ID=背景 Z=10] // ←「背景」という名前のレイヤ優先度を 10 に設定.

もし、複数のレイヤで同じ優先度（Ｚ値）のものが存在した場合、
そのレイヤ同士の重なり具合（優先度）は不確定となります。



■■レイヤセット機能


一見、レイヤに名前が付けられるようになったのと、
レイヤ優先度をリアルタイムに操作できるようになっただけで、
現状ではあまりメリットを感じられないかも知れません。

ですが、レイヤセット機能というのを利用することにより、
レイヤＩＤ管理にかなりの利便性が生まれてきます。

フォトショップのレイヤセット、もしくは
Windows のフォルダ構造を思い浮かべて頂ければ分かりやすいと思いますが、
例えば、フォルダの一括操作（描画モード変更、レイヤ削除）
フォルダ自体にマスクを設定したり、フォルダのスクリーンショットを取得することもできます。

例１２：
	CG[ID=ABC/ Z=1 SX=640 SY=480]

という感じで、レイヤＩＤの最後に「／」を記述するとレイヤセット指定となり、この場合、
「ABC」という名前の 640x480 のサイズのレイヤセット（フォルダ）を生成します。

例１３：
	CG[ID=ABC/CG1 FILE="cg1.png"]

生成した後、CG 命令を使って上のように記述すると、ABCフォルダの下に「CG1」というＩＤの
レイヤを生成することになります。

ＩＤの指定の仕方も、フォルダのパス指定とほぼ同じで、
「/」「.」「:」などを利用でき、「./ABC/DEF/../GHI」とか、
「:/TEMP」（←「：」はルート指定になります）のように記述できます。

現在の YU-RIS では、ルートに「W0」というレイヤセットが用意されています。
起動時はカレントパスもその場所に設定されているため、
例えばレイヤセット指定をせずにＩＤを指定して、

	CG[ID=ABC FILE="ABC.BMP"]

のように記述すると、「W0」セット内に「ABC」レイヤが作られることになり、
「ABC」レイヤのフルパスは「:/W0/ABC」となります。

これを利用して、例えばスクリーンショット機能を利用できます。

	CGACT[COPY2=1 ID=:/W0/ ID2=TMP]

上のように記述すると、「W0」セット内にあるレイヤのスクリーンショットを、
レイヤ「TMP」にコピーします。
つまり、メインウィンドウに表示されている画面イメージを、TMPレイヤに
コピーできるという事になります。
これを応用すれば、ノベルなら「背景画面」「立ち絵」「メッセージウィンドウ」
「チップアイコン」それぞれにレイヤセットを生成し、
それぞれ独立したスクリーンショットを撮る事も可能です。



</FONT></B>
</FONT>


</BODY></HTML>
