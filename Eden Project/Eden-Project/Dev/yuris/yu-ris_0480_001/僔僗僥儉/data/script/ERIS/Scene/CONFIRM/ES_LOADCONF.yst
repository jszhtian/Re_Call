//====================================================================
//
//■ロード確認
//
//====================================================================

//■スタティック変数宣言
{
}

//--------------------------------------------------------------------
//■LOOP
//--------------------------------------------------------------------
#=ES.LOADCONF.LOOP
{
	IF[@es.STATE==0] //FADE
	{
		\SS.FADE(200)
		@es.STATE=100
	}
	IFEND[]

	IF[@es.STATE==101] //[はい]
	{
//		GOSUB[#=ES.LOADCONF.LOAD]
//		\es.S.RETURN.NUM(3, 997, 0)
		GOSUB[#=es.CGTSS.2]
		\es.S.RETURN(1)
	}
	IFEND[]
	IF[@es.STATE==102] //[いいえ]
	{
		\es.S.RETURN(0)
	}
	IFEND[]

	return[]
}


//@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
//■ボタン処理
//@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@

//■[はい]ボタン -----------------------------------------------------
//
#=ES.LOADCONF.BTN.YES.ON { @es.STATE=101; return[] }

//■[いいえ]ボタン ---------------------------------------------------
//
#=ES.LOADCONF.BTN.NO.ON { @es.STATE=102; return[] }

//■[次回以降表示しない]ボタン ---------------------------------------
//
#=ES.LOADCONF.BTN.NEXT.ON { \BT.ONOFF.GET($es.BID, 0)(@es.GSD(114,08)); @es.GSD(114,08)=1-@es.GSD(114,08); return[] }



//====================================================================
//
//■ロード確認(DIALOG版)
//
//====================================================================

//--------------------------------------------------------------------
//■LOOP
//--------------------------------------------------------------------
#=ES.LOADCONFDLG.LOOP
{
	WAIT[FRAME=1] //最新の画面を表示させておくため.

	INT[@Ret=1]
	STR[$cap]

	STR[$LOAD.CONF.TX=$T(13,16)]

	IF[@es.GSD(114,08)==1] //ロード確認
	{
		//ボイス再生
		\_gosub(ES.LOADCONFDLG.VoicePlay.2)

		WINDOWINFO[NO=0 CAPTION=1 LET=$cap]
		$cap="確認"
		DIALOG[STR=$LOAD.CONF.TX CAPTION=$cap YESNO=1 LET=@Ret]
	}
	IFEND[]

	IF[@Ret==1]
	{
		GOSUB[#=ES.LOADCONF.LOAD]
	}
	IFEND[]

	\es.S.RETURN(999, 0); return[]
}


