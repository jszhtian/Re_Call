//============================================================================
//
//■ERIS シーン鑑賞へ戻る確認
//
//============================================================================

//■スタティック変数宣言
{
}

//--------------------------------------------------------------------
//■LOOP
//--------------------------------------------------------------------
#=ES.RPMODECONF.LOOP
{
	IF[@es.STATE==0]
	{
		IF[@es.GSD(114,03)==1] //シーン鑑賞へ戻る確認
			@es.STATE=1
		ELSE[]
			\BT.END(ES.RPMODECONF)
			@es.STATE=011
		IFEND[]
	}
	IFEND[]

	IF[@es.STATE==1] //画像
	{
		\_gosub(ES.RPMODECONF.VoicePlay.1)	// ボイス再生
		\SS.FADE.TASK(200)
		@es.STATE=100
	}
	IFEND[]

	IF[@es.STATE==011] //OK
	{
		\_gosub(ES.RPMODECONF.VoicePlay.2)	// ボイス再生

		//「はい」ボタン連打できないように
	//	\BT.W0.ALL(ES.RPMODECONF)

		\es.CGTSS
		\es.CGSDELALL

		@es.STATE=013
	}
	IFEND[]

	IF[@es.STATE==012] //キャンセル
	{
		\es.S.RETURN
	}
	IFEND[]
	IF[@es.STATE==013] //タイトルへ戻る
	{
		GOSUB[#=es.CGTSS.2]
		\es.S.RETURN.LBL("ES.GAMEMAIN", 910, 0)
	}
	IFEND[]


	return[]
}


//@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
//■ボタン処理
//@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@

//■[はい]ボタン -----------------------------------------------------
//
#=ES.RPMODECONF.BTN.YES.ON { @es.STATE=011; return[] }

//■[いいえ]ボタン ---------------------------------------------------
//
#=ES.RPMODECONF.BTN.NO.ON { @es.STATE=012; return[] }

//■[次回以降表示しない]ボタン ---------------------------------------
//
#=ES.RPMODECONF.BTN.NEXT.ON { \BT.ONOFF.GET($es.BID, 0)(@es.GSD(114,03)); @es.GSD(114,03)=1-@es.GSD(114,03); return[] }


//====================================================================
// シーン鑑賞へ戻る確認(DIALOG版)
//====================================================================
#=ES.RPMODECONF.DIALOG
{
	WAIT[FRAME=1] //最新の画面を表示させておくため.

	INT[@ret=1]

	IF[@es.GSD(114,03)==1] //確認あり
	{
		\_gosub(ES.RPMODECONF.VoicePlay.1)	// ボイス再生

		STR[$cap]
		WINDOWINFO[NO=0 CAPTION=1 LET=$cap]
		$cap="確認"
		DIALOG[STR=$T(13,06) CAPTION=$cap YESNO=1 LET=@ret]
	}
	IFEND[]

	return[rint=@ret]
}

